#### 操作系统启动流程

- 加电启动：当计算机加电时，电源会向计算机的各个组件提供电力，并将控制权交给计算机的中央处理器（CPU）。CPU 制造商规定了处理器的启动地址，并且通常被设置为物理内存中的特定地址，该地址称为重置向量（Reset Vector）或启动地址（Boot Address）：intel为0xffff'fff0，主板开发商需要在这个地址写入Firmware代码

- 启动固件（Firmware）：计算机的固件（例如BIOS或UEFI）会进行初始化和自检（POST，Power-On Self Test），确保硬件设备正常工作。固件还会加载存储在固件芯片或硬盘驱动器上的引导加载程序（Boot Loader）。

    - 传统的 BIOS 系统在引导过程中，会读取物理磁盘的第一个扇区（MBR），将其中的引导加载程序加载到内存的地址 0x7C00。引导加载程序通常是一个小型程序，其大小通常不超过 512 字节，以适应 MBR 的大小。

    - UEFI则可以不依赖于MBR，而且可以加载更大的引导加载程序，例如，使用lsblk命令可以查看到efi分区，这个分区存储了UEFI会加载的引导加载程序。

- 引导加载程序（Boot Loader）：引导加载程序是位于固件和操作系统之间的软件程序。它负责加载操作系统的核心部分到内存中，并启动操作系统。常见的引导加载程序包括GRUB（多用于Linux系统）和Windows Boot Manager（用于Windows系统）。

- 操作系统内核加载：引导加载程序从指定的位置加载操作系统的内核（Kernel）到计算机的内存中。内核是操作系统的核心部分，负责管理系统资源、执行系统调用和处理硬件设备。

- 初始化系统：一旦内核加载完成，它开始初始化系统的各个组件和服务。这包括初始化内存管理、文件系统、设备驱动程序等。还会启动系统服务和用户空间进程，为用户提供操作系统功能。

- 用户登录：当操作系统初始化完成后，通常会显示登录界面或桌面环境。用户可以使用用户名和密码登录到系统中。

- 用户操作：一旦用户登录到操作系统，他们可以执行各种操作，如打开应用程序、访问文件、执行命令等。

#### 全局构造函数、全局析构函数

- __attribute__((constructor))

- __attribute__((destructor))
