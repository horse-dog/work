#### 算法的并行化

- 构造计算图

- 拓扑排序

- 每一步的任务可以实现并行

#### 条件变量

```cpp
// 万能模板
lock(mutex);
while (!cond)
    wait(cv, mutex);
// ...
broadcast(cv);
```

- 为什么用while：防止虚假唤醒

- 为什么用broadcast：防止唤醒的线程不是满足当前条件的线程

#### 同步问题的解法

- 画出状态机转换图

- 使用条件变量，求解有限状态机问题